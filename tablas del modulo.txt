---- TABLAS REFERENCIADAS POR NUESTRO MODULO (faltan algunas) ----

empleados_C

public."empleados_C" (
  id_empleado bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  auth_user_id uuid NOT NULL DEFAULT auth.uid (),
  "P_nombre" character varying NOT NULL,
  "S_nombre" character varying NULL,
  "apellido_P" character varying NULL,
  "apellido_M" character varying NULL,
  fecha_de_nacimiento date NOT NULL,
  curp character varying NOT NULL,
  rfc character varying NOT NULL,
  nss character varying NOT NULL,
  sexo character varying NULL,
  nacionalidad character varying NOT NULL,
  correo_personal character varying NULL,
  correo_empresa character varying NOT NULL,
  fecha_de_ingreso date NOT NULL,
  estatus character varying NULL DEFAULT '''Activo'''::character varying,
  id_puesto_actual bigint NULL,
  CONSTRAINT "empleados_C_pkey" PRIMARY KEY (id_empleado),
  CONSTRAINT "empleados_C_auth_user_id_key" UNIQUE (auth_user_id),
  CONSTRAINT "empleados_C_correo_empresa_key" UNIQUE (correo_empresa),
  CONSTRAINT "empleados_C_correo_personal_key" UNIQUE (correo_personal),
  CONSTRAINT "empleados_C_curp_key" UNIQUE (curp),
  CONSTRAINT "empleados_C_nss_key" UNIQUE (nss),
  CONSTRAINT "empleados_C_rfc_key" UNIQUE (rfc),
  CONSTRAINT "empleados_C_auth_user_id_fkey" FOREIGN KEY (auth_user_id) REFERENCES auth.users (id),
  CONSTRAINT "empleados_C_id_puesto_actual_fkey" FOREIGN KEY (id_puesto_actual) REFERENCES "puestosA" (id_puesto)
) TABLESPACE pg_default;

-- TABLAS USADAS NUESTRO MODULO INCIDENCIAS Y DESPIDOS ----

-- Nivel 2: Dependen de ("empleados_C")

public.incidencia (
  id_incidencia bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  id_empleado bigint NOT NULL,
  fecha_incidencia timestamp WITHOUT TIME ZONE NULL,
  tipo_incidencia text NULL,
  descripcion_incidencia text NULL,
  evidencia_incidencia text NULL,
  accion_tomada text NULL,
  estado boolean NULL,
  CONSTRAINT incidencia_pkey PRIMARY KEY (id_incidencia),
  CONSTRAINT fk_incidencia_empleado FOREIGN KEY (id_empleado) REFERENCES "empleados_C" (id_empleado) ON UPDATE CASCADE ON DELETE RESTRICT
) TABLESPACE pg_default;

-- Nivel 4: Dependen de "incidencia" y "empleados_C"

public.despido (
  id_despido bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  id_empleado bigint NOT NULL,
  incidencias_relacionadas text NULL,
  fechas_despido timestamp WITHOUT TIME ZONE NULL,
  causa_despido text NULL,
  documentacion_despido text NULL,
  estado_despido text NULL,
  id_incidencia bigint NULL,
  CONSTRAINT despido_pkey PRIMARY KEY (id_despido),
  CONSTRAINT uq_despido_empleado UNIQUE (id_empleado),
  CONSTRAINT fk_despido_empleado FOREIGN KEY (id_empleado) REFERENCES "empleados_C" (id_empleado) ON UPDATE CASCADE ON DELETE RESTRICT,
  CONSTRAINT fk_despido_incidencia FOREIGN KEY (id_incidencia) REFERENCES incidencia (id_incidencia) ON UPDATE CASCADE ON DELETE SET NULL
) TABLESPACE pg_default;